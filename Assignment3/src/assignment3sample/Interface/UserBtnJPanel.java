/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package assignment3sample.Interface;

import assignment3sample.Business.Car;
import assignment3sample.Business.CarList;
import java.awt.CardLayout;
import java.util.ArrayList;
import java.util.List;
<<<<<<< Updated upstream
import javax.swing.JComboBox;
=======
import javax.swing.DefaultComboBoxModel;
>>>>>>> Stashed changes
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author gaomc
 */
public class UserBtnJPanel extends javax.swing.JPanel {


    Car car;
    CarList carList;
    JPanel viewJPanel;
    
    
    UserBtnJPanel(CarList carList, JPanel viewJPanel) {
        initComponents();
        this.carList = carList;
        this.viewJPanel = viewJPanel;
<<<<<<< Updated upstream
        
=======
        manufComboBox.setModel(new DefaultComboBoxModel(carList.getSetList("Manufacture").toArray()));
        modelComboBox.setModel(new DefaultComboBoxModel(carList.getSetList("ModelNum").toArray()));
        cityComboBox.setModel(new DefaultComboBoxModel(carList.getSetList("City").toArray()));
>>>>>>> Stashed changes

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        listCatByManuBtn = new javax.swing.JButton();
        listCarBySeatsBtn = new javax.swing.JButton();
        listCarByCityBtn = new javax.swing.JButton();
        find1stAvalCarBtn = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        listCatByModelNumBtn = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();
        listManufactureBtn = new javax.swing.JButton();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        manufactureTable = new javax.swing.JTable();
<<<<<<< Updated upstream
        manufComBox = new javax.swing.JComboBox<>();
=======
        minSeatsSpinner = new javax.swing.JSpinner();
        maxSeatsSpinner = new javax.swing.JSpinner();
        manufComboBox = new javax.swing.JComboBox<>();
        modelComboBox = new javax.swing.JComboBox<>();
        cityComboBox = new javax.swing.JComboBox<>();
>>>>>>> Stashed changes

        setBackground(new java.awt.Color(255, 255, 255));
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        listCatByManuBtn.setBackground(new java.awt.Color(255, 255, 255));
        listCatByManuBtn.setText("List Cars by Manufacture");
        listCatByManuBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                listCatByManuBtnActionPerformed(evt);
            }
        });
        add(listCatByManuBtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 150, 200, -1));

        listCarBySeatsBtn.setBackground(new java.awt.Color(255, 255, 255));
        listCarBySeatsBtn.setText("List Avaliable Car By Seats");
        listCarBySeatsBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                listCarBySeatsBtnActionPerformed(evt);
            }
        });
        add(listCarBySeatsBtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 60, 200, -1));

        listCarByCityBtn.setBackground(new java.awt.Color(255, 255, 255));
        listCarByCityBtn.setText("List Cars by City");
        listCarByCityBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                listCarByCityBtnActionPerformed(evt);
            }
        });
        add(listCarByCityBtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 280, 200, -1));

        find1stAvalCarBtn.setBackground(new java.awt.Color(255, 255, 255));
        find1stAvalCarBtn.setText("Find First Avaliable Car");
        find1stAvalCarBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                find1stAvalCarBtnActionPerformed(evt);
            }
        });
        add(find1stAvalCarBtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 20, 200, -1));

        jLabel1.setText("maxSeats > max:");
        add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 120, -1, 20));

        jLabel2.setText("minSeats < min:");
        add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 90, -1, 20));

        listCatByModelNumBtn.setBackground(new java.awt.Color(255, 255, 255));
        listCatByModelNumBtn.setText("List Car by Model #");
        listCatByModelNumBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                listCatByModelNumBtnActionPerformed(evt);
            }
        });
        add(listCatByModelNumBtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 220, 200, -1));

        jLabel3.setText("Model # :");
<<<<<<< Updated upstream
        add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 260, -1, 20));

        modelNumTxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                modelNumTxtActionPerformed(evt);
            }
        });
        add(modelNumTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 260, 100, -1));
=======
        add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 250, -1, 20));
>>>>>>> Stashed changes

        listManufactureBtn.setBackground(new java.awt.Color(255, 255, 255));
        listManufactureBtn.setText("manufactures");
        listManufactureBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                listManufactureBtnActionPerformed(evt);
            }
        });
        add(listManufactureBtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 340, 100, 110));

        jLabel4.setText("Manufacuture:");
<<<<<<< Updated upstream
        add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 200, -1, 20));

        manufactureTxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                manufactureTxtActionPerformed(evt);
            }
        });
        add(manufactureTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 200, 70, -1));
=======
        add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 180, -1, 20));
>>>>>>> Stashed changes

        jLabel5.setText("City:");
        add(jLabel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 310, -1, 20));

        manufactureTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null},
                {null},
                {null},
                {null}
            },
            new String [] {
                "Manufacture"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane2.setViewportView(manufactureTable);

<<<<<<< Updated upstream
        add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 350, 90, 110));

        manufComBox.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        manufComBox.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                manufComBoxActionPerformed(evt);
            }
        });
        add(manufComBox, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 200, -1, -1));
=======
        add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 340, 90, 110));

        minSeatsSpinner.setValue(1);
        add(minSeatsSpinner, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 90, -1, -1));

        maxSeatsSpinner.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        maxSeatsSpinner.setValue(5);
        add(maxSeatsSpinner, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 120, -1, -1));

        manufComboBox.setBackground(new java.awt.Color(255, 255, 255));
        manufComboBox.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                manufComboBoxActionPerformed(evt);
            }
        });
        add(manufComboBox, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 180, 80, -1));

        modelComboBox.setBackground(new java.awt.Color(255, 255, 255));
        modelComboBox.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                modelComboBoxActionPerformed(evt);
            }
        });
        add(modelComboBox, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 250, 80, -1));

        cityComboBox.setBackground(new java.awt.Color(255, 255, 255));
        cityComboBox.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cityComboBoxActionPerformed(evt);
            }
        });
        add(cityComboBox, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 310, 110, -1));
>>>>>>> Stashed changes
    }// </editor-fold>//GEN-END:initComponents

    private void listCatByManuBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_listCatByManuBtnActionPerformed
        // TODO add your handling code here:
//        if(manufactureTxt.getText().equals("")){
//            JOptionPane.showMessageDialog(null, "Please Input a manufacture!");
//            return;
//        }
        String searchInfo = manufComboBox.getSelectedItem().toString();
        ArrayList<Car> searchResult = (ArrayList) carList.getCarList("searchManufacture", searchInfo);
        showUserListCarJPanel(searchResult);
    }//GEN-LAST:event_listCatByManuBtnActionPerformed

    private void listCarBySeatsBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_listCarBySeatsBtnActionPerformed
        // TODO add your handling code here:
        
        
        try{
//            Integer.valueOf(minSeatsTxt.getText());
//            Integer.valueOf(maxSeatsTxt.getText());
              Integer.valueOf(minSeatsSpinner.getValue()+"");
              Integer.valueOf(maxSeatsSpinner.getValue()+"");
        }catch(NumberFormatException e){
            JOptionPane.showMessageDialog(null, "Must have a int type min/max SeatsNum!");
        }
//        
//        if(minSeatsTxt.getText().equals("") ){
//            return;
//        }else{
            int min = Integer.valueOf(minSeatsSpinner.getValue()+"");
            int max = Integer.valueOf(maxSeatsSpinner.getValue()+"");
            ArrayList<Car> searchResult = (ArrayList) carList.goodSeatsNum(min, max);
            showUserListCarJPanel(searchResult);
//        }
        

    }//GEN-LAST:event_listCarBySeatsBtnActionPerformed

    private void listCarByCityBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_listCarByCityBtnActionPerformed
        // TODO add your handling code here:
//        if(cityTxt.getText().equals("")){
//            JOptionPane.showMessageDialog(null, "Please Input a city!");
//            return;
//        } 
        if(cityComboBox.getSelectedItem() == null){
            JOptionPane.showMessageDialog(null, "Please Input a city!");
        }
        String searchInfo = cityComboBox.getSelectedItem().toString();

        ArrayList<Car> searchResult = (ArrayList) carList.getCarList("availbleCity", searchInfo);
        showUserListCarJPanel(searchResult);
    }//GEN-LAST:event_listCarByCityBtnActionPerformed

    private void find1stAvalCarBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_find1stAvalCarBtnActionPerformed
        // TODO add your handling code here:
        ArrayList<Car> searchResult = (ArrayList) carList.getCarList("avaliability", "true");
        
        if(searchResult.isEmpty()){
            JOptionPane.showMessageDialog(null, "There is no Avaliable car right now!");
            return;
        }
        ArrayList<Car> sigleResult = new ArrayList<>();
        
        sigleResult.add(searchResult.get(1)) ;
       
        showUserListCarJPanel(sigleResult);
        
    }//GEN-LAST:event_find1stAvalCarBtnActionPerformed

    private void listCatByModelNumBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_listCatByModelNumBtnActionPerformed
        // TODO add your handling code here:
//        if(modelNumTxt.getText().equals("")){
//            JOptionPane.showMessageDialog(null, "Please Input a model #!");
//            return;
//        }

        String searchInfo = modelComboBox.getSelectedItem().toString();

        ArrayList<Car> searchResult = (ArrayList) carList.getCarList("modelNum",searchInfo);
        
        showUserListCarJPanel(searchResult);
    }//GEN-LAST:event_listCatByModelNumBtnActionPerformed

    private void listManufactureBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_listManufactureBtnActionPerformed
        // TODO add your handling code here:
        ArrayList<String> manufactureList = (ArrayList) carList.getSetList("Manufacture");
//        for(String a : manufactureList){
//            System.out.println(a);
//        }
//       
        DefaultTableModel dtm = (DefaultTableModel)manufactureTable.getModel();
        dtm.setRowCount(0);
        
         manufactureList.forEach(a -> {
            Object[] row = new Object[dtm.getColumnCount()];
            row[0] = a;
            dtm.addRow(row);
        });
        
 
    }//GEN-LAST:event_listManufactureBtnActionPerformed

    private void manufComboBoxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_manufComboBoxActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_manufComboBoxActionPerformed

    private void modelComboBoxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_modelComboBoxActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_modelComboBoxActionPerformed

    private void cityComboBoxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cityComboBoxActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_cityComboBoxActionPerformed

    private void manufComBoxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_manufComBoxActionPerformed
        // TODO add your handling code here:
        
    }//GEN-LAST:event_manufComBoxActionPerformed

    private void showUserListCarJPanel(ArrayList<Car> searchResult){
        UserListCarJPanel userListCarJPanel = new UserListCarJPanel(viewJPanel,searchResult, carList );
        viewJPanel.add("UserListCarJPanel",userListCarJPanel);
        CardLayout layout = (CardLayout) viewJPanel.getLayout();
        layout.next(viewJPanel);
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JComboBox<String> cityComboBox;
    private javax.swing.JButton find1stAvalCarBtn;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JButton listCarByCityBtn;
    private javax.swing.JButton listCarBySeatsBtn;
    private javax.swing.JButton listCatByManuBtn;
    private javax.swing.JButton listCatByModelNumBtn;
    private javax.swing.JButton listManufactureBtn;
<<<<<<< Updated upstream
    private javax.swing.JComboBox<String> manufComBox;
=======
    private javax.swing.JComboBox<String> manufComboBox;
>>>>>>> Stashed changes
    private javax.swing.JTable manufactureTable;
    private javax.swing.JSpinner maxSeatsSpinner;
    private javax.swing.JSpinner minSeatsSpinner;
    private javax.swing.JComboBox<String> modelComboBox;
    // End of variables declaration//GEN-END:variables
}
